var spinners=function(){function t(t){switch(t.type){case"theCircle":theCircle.init(t);break;case"theTail":theTail.init(t);break;case"star":theExperiments.init(t);break;case"wormII":theMultiLayer.init(t);break;case"worm":theWorm.init(t);break;case"drop":theGravity.init(t);break;case"theWeirdSpoke":theWeirdSpoke.init(t);break;case"theWatch":theWatch.init(t);break;case"catchUpSpinnerII":theCatchupExperiment.init(t)}}function e(t,e,l,n,a,i,o,r,s){for(var u=a?a:0,c=[],h=0;h<t;h++){var d=particle.create(e/2+Math.cos(u)*n,l/2+Math.sin(u)*n,0,0,0),f=particle.create(e/2,l/2,0,0,0);i&&(d.friction=o,d.addSpring(f,r,s)),d.angleStart=u,u+=Math.PI/(t/2),d.angleStop=u,d.arcX=d.x,d.arcY=d.y,c.push(d)}return c}return{init:t,particleFactory:e}}(),theCatchupExperiment=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,d=t.speedA?t.speedA:.1,f=t.speedB?t.speedB:.04,y=t.myColor?t.myColor:"#4b4b4b",p=t.myArcRadius?t.myArcRadius:20,b=t.myLineWidth?t.myLineWidth:3,m=spinners.particleFactory(5,i,o,p,0,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),"startAngleB"===g?(r+=f,s+=f,u+=d,c+=f,utils.distanceXY(m[2].x,m[2].y,m[3].x,m[3].y)<3&&(g="pauseBA")):"stopAngleA"===g?(r+=f,s+=d,u+=f-.01,c+=f,utils.distanceXY(m[1].x,m[1].y,m[2].x,m[2].y)<3&&(g="pauseAA")):"startAngleA"===g?(r+=d,s+=f,u+=f,c+=f,utils.distanceXY(m[0].x,m[0].y,m[1].x,m[1].y)<3&&(g="pauseAB")):"stopAngleB"===g?(r+=f-.02,s+=f,u+=f,c+=d,utils.distanceXY(m[0].x,m[0].y,m[3].x,m[3].y)<3&&(g="pauseBB")):"pauseBB"===g?(r+=f,s+=f,u+=f+.02,c+=f,utils.distanceXY(m[2].x,m[2].y,m[4].x,m[4].y)<2&&(g="startAngleB")):"pauseBA"===g?(r+=f,s+=.01,s+=f+.01,u+=f,c+=f,utils.distanceXY(m[1].x,m[1].y,m[4].x,m[4].y)<2&&(g="stopAngleA")):"pauseAA"===g?(r+=f+.01,s+=f,u+=f,c+=f+.01,utils.distanceXY(m[0].x,m[0].y,m[4].x,m[4].y)<2&&(g="startAngleA")):"pauseAB"===g&&(r+=f,s+=f,u+=f,c+=f+.03,utils.distanceXY(m[3].x,m[3].y,m[4].x,m[4].y)<2&&(g="stopAngleB")),a.beginPath(),a.arc(i/2,o/2,p,r,s,!1),a.lineWidth=b,a.strokeStyle="green",a.strokeStyle=y,a.stroke(),a.beginPath(),a.arc(i/2,o/2,p,u,c+1,!1),a.lineWidth=b,a.strokeStyle="red",a.strokeStyle=y,a.stroke();for(var t=0;t<m.length;t++)a.beginPath(),a.arc(m[0].x=i/2+Math.cos(r)*p,m[0].y=o/2+Math.sin(r)*p,b/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(m[1].x=i/2+Math.cos(s)*p,m[1].y=o/2+Math.sin(s)*p,b/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(m[2].x=i/2+Math.cos(u)*p,m[2].y=o/2+Math.sin(u)*p,b/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(m[3].x=i/2+Math.cos(c+1)*p,m[3].y=o/2+Math.sin(c+1)*p,b/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(m[4].x=i/2+Math.cos(h)*p,m[4].y=o/2+Math.sin(h)*p,2,0,2*Math.PI,!1),a.globalAlpha=0,a.fillStyle="#ff0000",a.fill();a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(h)*p,o/2+Math.sin(h)*p),a.lineWidth=.2,a.stroke(),h+=d,a.restore()}var n=null,a=null,i=null,o=null,r=0,s=1,u=1,c=1,h=2,d=.1,f=.04,g="stopAngleB",y=null,p=20,b=3,m=[];return{init:t}}(),theCircle=function(){function t(t){var l=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),o=a.width=l.offsetWidth,r=a.height=l.offsetHeight,s=t.arcRadius?t.arcRadius:20,u=t.angleA?t.angleA:0,c=t.angleB?t.angleB:1,f=t.speedA?t.speedA:.15,g=t.speedB?t.speedB:.06,y=t.headColor?t.headColor:"#4b4b4b",p=t.headSize?t.headSize:2,b=t.tailColor?t.tailColor:"#4b4b4b",m=t.tailSize?t.tailSize:1,M=t.bodyColor?t.bodyColor:"#4b4b4b",I=t.bodyStrokeWidth?t.bodyStrokeWidth:1,v=t.distMin?t.distMin:1,S=t.distMax?t.distMax:4,A=spinners.particleFactory(2,o,r,s,0,!1,null,null,null),e()}function e(){i.clearRect(0,0,o,r),l(),n(),requestAnimationFrame(e)}function l(){var t=c-u,e=h-d;"tail"===x?(u+=f,c+=g,h+=g,d+=f,t<v&&(x="pauseHead")):"head"===x?(u+=g,c+=f,h+=f,d+=g,t>S&&(x="pauseTail")):"pauseTail"===x?(u+=g,c+=g,h+=f,d+=g,e>=2*Math.PI&&(x="tail",h=c)):"pauseHead"===x&&(u+=g,c+=g,h+=g,d+=f,e<=0&&(x="head",d=u))}function n(){i.save(),i.beginPath(),i.arc(o/2,r/2,s,u,c,!1),i.lineWidth=I,i.strokeStyle=M,i.stroke();for(var t=0;t<A.length;t++)i.beginPath(),i.arc(A[0].x=o/2+Math.cos(u)*s,A[t].y=r/2+Math.sin(u)*s,m,0,2*Math.PI,!1),i.fillStyle=b,i.fill(),i.beginPath(),i.arc(A[1].x=o/2+Math.cos(c)*s,A[1].y=r/2+Math.sin(c)*s,p,0,2*Math.PI,!1),i.fillStyle=y,i.fill();i.restore()}var a=null,i=null,o=null,r=null,s=null,u=null,c=null,h=1,d=0,f=null,g=null,y=null,p=null,b=null,m=null,M=null,I=null,v=null,S=null,x="head",A=[];return{init:t}}(),theExperiments=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,f=spinners.particleFactory(u,i,o,r,0,!1,null,null,null),g=spinners.particleFactory(u,i,o,s,Math.PI/u,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save();for(var t=0;t<u;t++)a.beginPath(),a.moveTo(f[t].x=i/2+Math.cos(f[t].angleStart)*r,f[t].y=o/2+Math.sin(f[t].angleStart)*r),a.lineTo(g[t].x=i/2+Math.cos(g[t].angleStart)*s,g[t].y=o/2+Math.sin(g[t].angleStart)*s),t<u-1?a.lineTo(f[t+1].x,f[t+1].y):(a.moveTo(g[u-1].x,g[u-1].y),a.lineTo(f[0].x,f[0].y)),a.strokeStyle="#4b4b4b",a.stroke(),f[t].angleStart+=c,g[t].angleStart+=c,"shrink"===d?(s-=h,s<=r-8&&(d="grow")):"grow"===d&&(s+=h,s>=r+8&&(d="shrink"));a.restore()}var n=null,a=null,i=null,o=null,r=20,s=r+8,u=8,c=.03,h=.01,d="shrink",f=[],g=[];return{init:t}}(),theGear=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.restore()}var n=null,a=null,i=null,o=null;return{init:t}}(),theGravity=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,c=t.arcRadius?t.arcRadius:20,h=t.lineColor?t.lineColor:"#4b4b4b",d=t.lineWidth?t.lineWidth:1,f=t.dotColor?t.dotColor:"#4b4b4b",g=t.dotSize?t.dotSize:2,y=t.opacity?t.opacity:1,e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.beginPath(),a.arc(i/2+Math.cos(r)*c,o/2+Math.sin(r)*c,g,0,2*Math.PI,!1),a.fillStyle=f,a.globalAlpha=y,a.fill(),a.beginPath(),a.arc(i/2,o/2,c,0,2*Math.PI,!1),a.lineWidth=d,a.strokeStyle=h,a.stroke(),r>=1.5*Math.PI?s+=u:r>=0&&r<=.5*Math.PI?s+=u:s-=1.05*u,r>2*Math.PI&&(r=0),r+=s,a.restore()}var n=null,a=null,i=null,o=null,r=1.5*Math.PI,s=.02,u=.01,c=null,h=null,d=null,f=null,g=null,y=null;return{init:t}}(),theMultiLayer=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),o=a.width=n.offsetWidth,r=a.height=n.offsetHeight,h=t,s=t.layers,c=e(t),l()}function e(t){for(var e=[],l=t.arcRadiusOffset,n=0;n<t.layers;n++){var a={angleA:0,angleB:1,speedA:.1,speedB:.02,headColor:t.template.headColor,headSize:3,tailColor:t.template.tailColor,tailSize:2,bodyColor:t.template.bodyColor,bodyStrokeWidth:1,distMin:1,distMax:4,arcRadius:l,pSize:1,pHead:spinners.particleFactory(1,o,r,l,0,!1,null,null,null),pTail:spinners.particleFactory(1,o,r,l,0,!1,null,null,null)};e.push(a),l-=t.layersDistance}return e}function l(){i.clearRect(0,0,o,r),n(),requestAnimationFrame(l)}function n(){i.save();for(var t=0;t<s;t++)i.beginPath(),i.arc(c[t].pHead[0].x=o/2+Math.cos(h.angleA)*c[t].arcRadius,c[t].pHead[0].x=r/2+Math.sin(h.angleA)*c[t].arcRadius,.5,0,2*Math.PI,!1),i.arc(c[t].pTail[0].x=o/2+Math.cos(h.angleB)*c[t].arcRadius,c[t].pTail[0].x=r/2+Math.sin(h.angleB)*c[t].arcRadius,.5,0,2*Math.PI,!1),i.fillStyle="#4b4b4b",i.fill(),i.beginPath(),i.arc(o/2,r/2,c[t].arcRadius,h.angleA,h.angleB,!1),i.strokeStyle="#4b4b4b",i.lineWidth=h.lineWidth,i.stroke();var e=h.angleB-h.angleA;"tail"===u?(h.angleA+=h.speedA,h.angleB+=h.speedB,e<h.distMin&&(u="head")):"head"===u&&(h.angleA+=h.speedB,h.angleB+=h.speedA,e>h.distMax&&(u="tail")),i.restore()}var a=null,i=null,o=null,r=null,s=null,u="head",c=[],h=null;return{init:t}}(),theTail=function(){function t(t){var a=document.getElementById(t.containerId);o=document.getElementById(t.canvasId),r=o.getContext("2d"),s=o.width=a.offsetWidth,u=o.height=a.offsetHeight,p=spinners.particleFactory(y,s,u,c,0,!1,null,null,null),e(),l(),n()}function e(){for(var t=h,e=0;e<p.length;e++)p[e].size=t,t-=g}function l(){for(var t=d,e=0;e<p.length;e++)p[e].position=t,t-=g}function n(){r.clearRect(0,0,s,u),i(),a(),requestAnimationFrame(n)}function a(){for(var t=0;t<p.length;t++)p[t].position+=f}function i(){r.save(),r.beginPath(),r.arc(s/2,u/2,c,0,2*Math.PI,!1),r.strokeStyle="white",r.lineWidth=6,r.stroke();for(var t=0;t<p.length;t++)r.beginPath(),r.arc(p[t].x=s/2+Math.cos(p[t].position)*c,p[t].y=u/2+Math.sin(p[t].position)*c,p[t].size,0,2*Math.PI,!1),r.fillStyle="#4b4b4b",r.fill();r.restore()}var o=null,r=null,s=null,u=null,c=20,h=2,d=0,f=.1,g=.05,y=40,p=[];return{init:t}}(),theWatch=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,r=t.arcRadius?t.arcRadius:15,s=t.speed?t.speed:.1,u=s/12,c=t.startAngleMinutes?t.startAngleMinutes:0,h=t.startAngleHours?t.startAngleHours:0,d=t.armWidthMinute?t.armWidthMinute:1,f=t.armWidthHour?t.armWidthHour:2,g=t.clockLineWidth?t.clockLineWidth:1,y=t.armColorMinute?t.armColorMinute:"#4b4b4b",p=t.armColorHour?t.armColorHour:"#4b4b4b",b=t.clockColorLine?t.clockColorLine:"#4b4b4b",m=t.clockColorFill?t.clockColorFill:"#ffffff",M=t.indicatorColorFill?t.indicatorColorFill:"#4b4b4b",I=t.opacity?t.opacity:1,t.hoursIndicator&&(v=spinners.particleFactory(12,i,o,r/1.2,0,!1,null,null,null)),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.globalAlpha=I,a.beginPath(),a.arc(i/2,o/2,r,0,2*Math.PI,!1),a.strokeStyle=b,a.lineWidth=g,a.fillStyle=m,a.globalAlpha=I,a.fill(),a.stroke();for(var t=0;t<v.length;t++)a.beginPath(),a.arc(v[t].x,v[t].y,1,0,2*Math.PI,!1),a.fillStyle=M,a.fill();a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(h)*(r/2),o/2+Math.sin(h)*(r/2)),a.strokeStyle=p,a.lineWidth=f,a.stroke(),a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(h)*-(r/4),o/2+Math.sin(h)*-(r/4)),a.strokeStyle=p,a.lineWidth=f,a.stroke(),a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(c)*(r/1.3),o/2+Math.sin(c)*(r/1.3)),a.strokeStyle=y,a.lineWidth=d,a.stroke(),a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(c)*-(r/3),o/2+Math.sin(c)*-(r/3)),a.strokeStyle=y,a.lineWidth=d,a.stroke(),c+=s,h+=u,a.restore()}var n=null,a=null,i=null,o=null,r=null,s=null,u=null,c=null,h=null,d=null,f=null,g=null,y=null,p=null,b=null,m=null,M=null,I=null,v=[];return{init:t}}(),theWeirdSpoke=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),o=a.width=n.offsetWidth,r=a.height=n.offsetHeight,e(48),l()}function e(t){for(var e=0,l=0;l<t;l++){var n=particle.create(o/2+Math.cos(e)*s,r/2+Math.sin(e)*s,0,0,0),a=particle.create(o/2,r/2,0,0,0);n.friction=h,n.angleStart=e,n.addSpring(a,u,c),e+=Math.PI/(t/2),n.angleStop=e,g.push(n)}}function l(){i.clearRect(0,0,o,r),n(),requestAnimationFrame(l)}function n(){i.save();for(var t=0;t<g.length;t++)i.beginPath(),i.arc(g[t].x,g[t].y,1,0,2*Math.PI,!1),i.lineTo(g[t].x,g[t].y),f>g[t].angleStart&&f<g[t].angleStop?(isNaN(g[t].x)||i.moveTo(g[t].x=o/2+Math.cos(g[t].angleStop),g[t].y=r/2+Math.sin(g[t].angleStop)),i.fillStyle="#ff0000"):i.fillStyle="#666666",i.fill(),g[t].update();f+=d,f>2*Math.PI&&(f=0),i.restore()}var a=null,i=null,o=null,r=null,s=30,u=.1,c=10,h=.25,d=.08,f=0,g=[];return{init:t}}(),theWorm=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,r=t.arcRadius?t.arcRadius:20,s=t.angleA?t.angleA:0,u=t.angleB?t.angleB:1,c=t.speedA?t.speedA:.15,h=t.speedB?t.speedB:.06,d=t.headColor?t.headColor:"#4b4b4b",f=t.headSize?t.headSize:2,g=t.tailColor?t.tailColor:"#4b4b4b",y=t.tailSize?t.tailSize:1,p=t.bodyColor?t.bodyColor:"#4b4b4b",b=t.bodyStrokeWidth?t.bodyStrokeWidth:1,m=t.distMin?t.distMin:1,M=t.distMax?t.distMax:4,v=spinners.particleFactory(2,i,o,r,0,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.beginPath(),a.arc(i/2,o/2,r,s,u,!1),a.lineWidth=b,a.strokeStyle=p,a.stroke();for(var t=0;t<v.length;t++)a.beginPath(),a.arc(v[0].x=i/2+Math.cos(s)*r,v[t].y=o/2+Math.sin(s)*r,y,0,2*Math.PI,!1),a.fillStyle=g,a.fill(),a.beginPath(),a.arc(v[1].x=i/2+Math.cos(u)*r,v[1].y=o/2+Math.sin(u)*r,f,0,2*Math.PI,!1),a.fillStyle=d,a.fill();var e=u-s;"tail"===I?(s+=c,u+=h,e<m&&(I="head")):"head"===I&&(s+=h,u+=c,e>M&&(I="tail")),a.restore()}var n=null,a=null,i=null,o=null,r=null,s=null,u=null,c=null,h=null,d=null,f=null,g=null,y=null,p=null,b=null,m=null,M=null,I="head",v=[];return{init:t}}();