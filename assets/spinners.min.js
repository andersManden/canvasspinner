var spinners=function(){function t(t){switch(t.type){case"theCircle":theCircle.init(t);break;case"theTail":theTail.init(t);break;case"star":theExperiments.init(t);break;case"wormII":theMultiLayer.init(t);break;case"worm":theWorm.init(t);break;case"drop":theGravity.init(t);break;case"theWeirdSpoke":theWeirdSpoke.init(t);break;case"theWatch":theWatch.init(t);break;case"catchUpSpinnerII":theCatchupExperiment.init(t);break;case"theGear":theGear.init(t)}}function e(t,e,i,l,n,a,o,r,s){for(var c=n?n:0,h=[],u=0;u<t;u++){var d=particle.create(e/2+Math.cos(c)*l,i/2+Math.sin(c)*l,0,0,0),g=particle.create(e/2,i/2,0,0,0);a&&(d.friction=o,d.addSpring(g,r,s)),d.angleStart=c,c+=Math.PI/(t/2),d.angleStop=c,d.arcX=d.x,d.arcY=d.y,h.push(d)}return h}return{init:t,particleFactory:e}}(),theCatchupExperiment=function(){function t(t){var i=document.getElementById(t.containerId);l=document.getElementById(t.canvasId),n=l.getContext("2d"),a=l.width=i.offsetWidth,o=l.height=i.offsetHeight,d=t.speedA?t.speedA:.1,g=t.speedB?t.speedB:.04,y=t.myColor?t.myColor:"#4b4b4b",b=t.myArcRadius?t.myArcRadius:20,p=t.myLineWidth?t.myLineWidth:3,x=spinners.particleFactory(5,a,o,b,0,!1,null,null,null),e()}function e(){n.clearRect(0,0,a,o),i(),requestAnimationFrame(e)}function i(){n.save(),"startAngleB"===f?(r+=g,s+=g,c+=d,h+=g,utils.distanceXY(x[2].x,x[2].y,x[3].x,x[3].y)<3&&(f="pauseBA")):"stopAngleA"===f?(r+=g,s+=d,c+=g-.01,h+=g,utils.distanceXY(x[1].x,x[1].y,x[2].x,x[2].y)<3&&(f="pauseAA")):"startAngleA"===f?(r+=d,s+=g,c+=g,h+=g,utils.distanceXY(x[0].x,x[0].y,x[1].x,x[1].y)<3&&(f="pauseAB")):"stopAngleB"===f?(r+=g-.02,s+=g,c+=g,h+=d,utils.distanceXY(x[0].x,x[0].y,x[3].x,x[3].y)<3&&(f="pauseBB")):"pauseBB"===f?(r+=g,s+=g,c+=g+.02,h+=g,utils.distanceXY(x[2].x,x[2].y,x[4].x,x[4].y)<2&&(f="startAngleB")):"pauseBA"===f?(r+=g,s+=.01,s+=g+.01,c+=g,h+=g,utils.distanceXY(x[1].x,x[1].y,x[4].x,x[4].y)<2&&(f="stopAngleA")):"pauseAA"===f?(r+=g+.01,s+=g,c+=g,h+=g+.01,utils.distanceXY(x[0].x,x[0].y,x[4].x,x[4].y)<2&&(f="startAngleA")):"pauseAB"===f&&(r+=g,s+=g,c+=g,h+=g+.03,utils.distanceXY(x[3].x,x[3].y,x[4].x,x[4].y)<2&&(f="stopAngleB")),n.beginPath(),n.arc(a/2,o/2,b,r,s,!1),n.lineWidth=p,n.strokeStyle="green",n.strokeStyle=y,n.stroke(),n.beginPath(),n.arc(a/2,o/2,b,c,h+1,!1),n.lineWidth=p,n.strokeStyle="red",n.strokeStyle=y,n.stroke();for(var t=0;t<x.length;t++)n.beginPath(),n.arc(x[0].x=a/2+Math.cos(r)*b,x[0].y=o/2+Math.sin(r)*b,p/2-.2,0,2*Math.PI,!1),n.fillStyle=y,n.fill(),n.beginPath(),n.arc(x[1].x=a/2+Math.cos(s)*b,x[1].y=o/2+Math.sin(s)*b,p/2-.2,0,2*Math.PI,!1),n.fillStyle=y,n.fill(),n.beginPath(),n.arc(x[2].x=a/2+Math.cos(c)*b,x[2].y=o/2+Math.sin(c)*b,p/2-.2,0,2*Math.PI,!1),n.fillStyle=y,n.fill(),n.beginPath(),n.arc(x[3].x=a/2+Math.cos(h+1)*b,x[3].y=o/2+Math.sin(h+1)*b,p/2-.2,0,2*Math.PI,!1),n.fillStyle=y,n.fill(),n.beginPath(),n.arc(x[4].x=a/2+Math.cos(u)*b,x[4].y=o/2+Math.sin(u)*b,2,0,2*Math.PI,!1),n.globalAlpha=0,n.fillStyle="#ff0000",n.fill();n.beginPath(),n.moveTo(a/2,o/2),n.lineTo(a/2+Math.cos(u)*b,o/2+Math.sin(u)*b),n.lineWidth=.2,n.stroke(),u+=d,n.restore()}var l=null,n=null,a=null,o=null,r=0,s=1,c=1,h=1,u=2,d=.1,g=.04,f="stopAngleB",y=null,b=20,p=3,x=[];return{init:t}}(),theCircle=function(){function t(t){var n=document.getElementById(t.containerId);o=document.getElementById(t.canvasId),r=o.getContext("2d"),e(n),i(t),I=spinners.particleFactory(2,s,c,h,0,!1,null,null,null),l()}function e(t){var e=window.devicePixelRatio||1,i=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;R=e/i,s=o.width=t.offsetWidth*R,c=o.height=t.offsetHeight*R,o.style.width=s/R+"px",o.style.height=c/R+"px"}function i(t){h=t.arcRadius?t.arcRadius:20,u=t.angleA?t.angleA:0,d=t.angleB?t.angleB:1,y=t.speedA?t.speedA:.15,b=t.speedB?t.speedB:.06,p=t.headColor?t.headColor:"#4b4b4b",x=t.headSize?t.headSize:2,S=t.tailColor?t.tailColor:"#4b4b4b",m=t.tailSize?t.tailSize:1,M=t.bodyColor?t.bodyColor:"#4b4b4b",P=t.bodyStrokeWidth?t.bodyStrokeWidth:1,k=t.distMin?t.distMin:1,v=t.distMax?t.distMax:4}function l(){r.clearRect(0,0,s,c),n(),a(),requestAnimationFrame(l)}function n(){var t=d-u,e=g-f;"tail"===B?(u+=y,d+=b,g+=b,f+=y,t<k&&(B="pauseHead")):"head"===B?(u+=b,d+=y,g+=y,f+=b,t>v&&(B="pauseTail")):"pauseTail"===B?(u+=b,d+=b,g+=y,f+=b,e>=2*Math.PI&&(B="tail",g=d)):"pauseHead"===B&&(u+=b,d+=b,g+=b,f+=y,e<=0&&(B="head",f=u))}function a(){r.save(),r.beginPath(),r.arc(s/2,c/2,h,u,d,!1),r.lineWidth=P,r.strokeStyle=M,r.stroke();for(var t=0;t<I.length;t++)r.beginPath(),r.arc(I[0].x=s/2+Math.cos(u)*h,I[t].y=c/2+Math.sin(u)*h,m,0,2*Math.PI,!1),r.fillStyle=S,r.fill(),r.beginPath(),r.arc(I[1].x=s/2+Math.cos(d)*h,I[1].y=c/2+Math.sin(d)*h,x,0,2*Math.PI,!1),r.fillStyle=p,r.fill();r.restore()}var o=null,r=null,s=null,c=null,h=null,u=null,d=null,g=1,f=0,y=null,b=null,p=null,x=null,S=null,m=null,M=null,P=null,k=null,v=null,B="head",I=[],R=null;return{init:t}}(),theExperiments=function(){function t(t){var i=document.getElementById(t.containerId);l=document.getElementById(t.canvasId),n=l.getContext("2d"),a=l.width=i.offsetWidth,o=l.height=i.offsetHeight,g=spinners.particleFactory(c,a,o,r,0,!1,null,null,null),f=spinners.particleFactory(c,a,o,s,Math.PI/c,!1,null,null,null),e()}function e(){n.clearRect(0,0,a,o),i(),requestAnimationFrame(e)}function i(){n.save();for(var t=0;t<c;t++)n.beginPath(),n.moveTo(g[t].x=a/2+Math.cos(g[t].angleStart)*r,g[t].y=o/2+Math.sin(g[t].angleStart)*r),n.lineTo(f[t].x=a/2+Math.cos(f[t].angleStart)*s,f[t].y=o/2+Math.sin(f[t].angleStart)*s),t<c-1?n.lineTo(g[t+1].x,g[t+1].y):(n.moveTo(f[c-1].x,f[c-1].y),n.lineTo(g[0].x,g[0].y)),n.strokeStyle="#4b4b4b",n.stroke(),g[t].angleStart+=h,f[t].angleStart+=h,"shrink"===d?(s-=u,s<=r-8&&(d="grow")):"grow"===d&&(s+=u,s>=r+8&&(d="shrink"));n.restore()}var l=null,n=null,a=null,o=null,r=20,s=r+8,c=8,h=.03,u=.01,d="shrink",g=[],f=[];return{init:t}}(),theGear=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),e(l),y=spinners.particleFactory(h,o,r,s,Math.PI/h,!1,null,null,null),b=spinners.particleFactory(h,o,r,c,Math.PI/h,!1,null,null,null),i()}function e(t){var e=window.devicePixelRatio||1,i=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;p=e/i,o=n.width=t.offsetWidth*p,r=n.height=t.offsetHeight*p,n.style.width=o/p+"px",n.style.height=r/p+"px"}function i(){a.clearRect(0,0,o,r),l(),requestAnimationFrame(i)}function l(){a.save();for(var t=0;t<h;t++)a.beginPath(),a.fillStyle="#4b4b4b",t%2!==0&&(a.moveTo(b[t].x=o/2+Math.cos(b[t].angleStart+g)*c,b[t].y=r/2+Math.sin(b[t].angleStart+g)*c),a.lineTo(b[t-1].x=o/2+Math.cos(b[t-1].angleStart-g)*c,b[t-1].y=r/2+Math.sin(b[t-1].angleStart-g)*c),a.lineTo(y[t-1].x=o/2+Math.cos(y[t-1].angleStart+f)*s,y[t-1].y=r/2+Math.sin(y[t-1].angleStart+f)*s),a.lineTo(y[t].x=o/2+Math.cos(y[t].angleStart-f)*s,y[t].y=r/2+Math.sin(y[t].angleStart-f)*s),a.lineTo(b[t].x=o/2+Math.cos(b[t].angleStart+g)*c,b[t].y=r/2+Math.sin(b[t].angleStart+g)*c)),a.fill(),y[t].angleStart+=u,b[t].angleStart+=u;a.beginPath(),a.arc(o/2,r/2,c-d/2,0,2*Math.PI,!1),a.strokeStyle="#4b4b4b",a.lineWidth=d,a.stroke(),a.restore()}var n=null,a=null,o=null,r=null,s=20,c=s-s/5,h=16,u=.06,d=c/2,g=.1,f=.1,y=[],b=[],p=null;return{init:t}}(),theGravity=function(){function t(t){var i=document.getElementById(t.containerId);l=document.getElementById(t.canvasId),n=l.getContext("2d"),a=l.width=i.offsetWidth,o=l.height=i.offsetHeight,h=t.arcRadius?t.arcRadius:20,u=t.lineColor?t.lineColor:"#4b4b4b",d=t.lineWidth?t.lineWidth:1,g=t.dotColor?t.dotColor:"#4b4b4b",f=t.dotSize?t.dotSize:2,y=t.opacity?t.opacity:1,e()}function e(){n.clearRect(0,0,a,o),i(),requestAnimationFrame(e)}function i(){n.save(),n.beginPath(),n.arc(a/2+Math.cos(r)*h,o/2+Math.sin(r)*h,f,0,2*Math.PI,!1),n.fillStyle=g,n.globalAlpha=y,n.fill(),n.beginPath(),n.arc(a/2,o/2,h,0,2*Math.PI,!1),n.lineWidth=d,n.strokeStyle=u,n.stroke(),r>=1.5*Math.PI?s+=c:r>=0&&r<=.5*Math.PI?s+=c:s-=1.05*c,r>2*Math.PI&&(r=0),r+=s,n.restore()}var l=null,n=null,a=null,o=null,r=1.5*Math.PI,s=.02,c=.01,h=null,u=null,d=null,g=null,f=null,y=null;return{init:t}}(),theMultiLayer=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),o=a.getContext("2d"),e(n),d=t,c=t.layers,u=i(t),l()}function e(t){var e=window.devicePixelRatio||1,i=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,l=e/i;r=a.width=t.offsetWidth*l,s=a.height=t.offsetHeight*l,a.style.width=r/l+"px",a.style.height=s/l+"px"}function i(t){for(var e=[],i=t.arcRadiusOffset,l=0;l<t.layers;l++){var n={angleA:0,angleB:1,speedA:.1,speedB:.02,headColor:t.template.headColor,headSize:3,tailColor:t.template.tailColor,tailSize:2,bodyColor:t.template.bodyColor,bodyStrokeWidth:1,distMin:1,distMax:4,arcRadius:i,pSize:1,pHead:spinners.particleFactory(1,r,s,i,0,!1,null,null,null),pTail:spinners.particleFactory(1,r,s,i,0,!1,null,null,null)};e.push(n),i-=t.layersDistance}return e}function l(){o.clearRect(0,0,r,s),n(),requestAnimationFrame(l)}function n(){o.save();for(var t=0;t<c;t++)o.beginPath(),o.arc(u[t].pHead[0].x=r/2+Math.cos(d.angleA)*u[t].arcRadius,u[t].pHead[0].x=s/2+Math.sin(d.angleA)*u[t].arcRadius,.5,0,2*Math.PI,!1),o.arc(u[t].pTail[0].x=r/2+Math.cos(d.angleB)*u[t].arcRadius,u[t].pTail[0].x=s/2+Math.sin(d.angleB)*u[t].arcRadius,.5,0,2*Math.PI,!1),o.fillStyle="#4b4b4b",o.fill(),o.beginPath(),o.arc(r/2,s/2,u[t].arcRadius,d.angleA,d.angleB,!1),o.strokeStyle="#4b4b4b",o.lineWidth=d.lineWidth,o.stroke();var e=d.angleB-d.angleA;"tail"===h?(d.angleA+=d.speedA,d.angleB+=d.speedB,e<d.distMin&&(h="head")):"head"===h&&(d.angleA+=d.speedB,d.angleB+=d.speedA,e>d.distMax&&(h="tail")),o.restore()}var a=null,o=null,r=null,s=null,c=null,h="head",u=[],d=null;return{init:t}}(),theTail=function(){function t(t){var a=document.getElementById(t.containerId);r=document.getElementById(t.canvasId),s=r.getContext("2d"),e(a),p=spinners.particleFactory(b,c,h,u,0,!1,null,null,null),i(),l(),n()}function e(t){var e=window.devicePixelRatio||1,i=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1,l=e/i;c=r.width=t.offsetWidth*l,h=r.height=t.offsetHeight*l,r.style.width=c/l+"px",r.style.height=h/l+"px"}function i(){for(var t=d,e=0;e<p.length;e++)p[e].size=t,t-=y}function l(){for(var t=g,e=0;e<p.length;e++)p[e].position=t,t-=y}function n(){s.clearRect(0,0,c,h),o(),a(),requestAnimationFrame(n)}function a(){for(var t=0;t<p.length;t++)p[t].position+=f}function o(){s.save(),s.beginPath(),s.arc(c/2,h/2,u,0,2*Math.PI,!1),s.strokeStyle="white",s.lineWidth=6,s.stroke();for(var t=0;t<p.length;t++)s.beginPath(),s.arc(p[t].x=c/2+Math.cos(p[t].position)*u,p[t].y=h/2+Math.sin(p[t].position)*u,p[t].size,0,2*Math.PI,!1),s.fillStyle="#4b4b4b",s.fill();s.restore()}var r=null,s=null,c=null,h=null,u=20,d=2,g=0,f=.1,y=.05,b=40,p=[];return{init:t}}(),theWatch=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),o=a.getContext("2d"),e(n),i(t),l()}function e(t){var e=window.devicePixelRatio||1,i=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;ratio=e/i,r=a.width=t.offsetWidth*ratio,s=a.height=t.offsetHeight*ratio,a.style.width=r/ratio+"px",a.style.height=s/ratio+"px"}function i(t){c=t.arcRadius?t.arcRadius:15,h=t.speed?t.speed:.1,u=h/12,d=t.startAngleMinutes?t.startAngleMinutes:0,g=t.startAngleHours?t.startAngleHours:0,f=t.armWidthMinute?t.armWidthMinute:1,y=t.armWidthHour?t.armWidthHour:2,b=t.clockLineWidth?t.clockLineWidth:1,p=t.armColorMinute?t.armColorMinute:"#4b4b4b",x=t.armColorHour?t.armColorHour:"#4b4b4b",S=t.clockColorLine?t.clockColorLine:"#4b4b4b",m=t.clockColorFill?t.clockColorFill:"#ffffff",M=t.indicatorColorFill?t.indicatorColorFill:"#4b4b4b",P=t.opacity?t.opacity:1,t.hoursIndicator&&(k=spinners.particleFactory(12,r,s,c/1.2,0,!1,null,null,null))}function l(){o.clearRect(0,0,r,s),n(),requestAnimationFrame(l)}function n(){o.save(),o.globalAlpha=P,o.beginPath(),o.arc(r/2,s/2,c,0,2*Math.PI,!1),o.strokeStyle=S,o.lineWidth=b,o.fillStyle=m,o.globalAlpha=P,o.fill(),o.stroke();for(var t=0;t<k.length;t++)o.beginPath(),o.arc(k[t].x,k[t].y,1,0,2*Math.PI,!1),o.fillStyle=M,o.fill();o.beginPath(),o.moveTo(r/2,s/2),o.lineTo(r/2+Math.cos(g)*(c/2),s/2+Math.sin(g)*(c/2)),o.strokeStyle=x,o.lineWidth=y,o.stroke(),o.beginPath(),o.moveTo(r/2,s/2),o.lineTo(r/2+Math.cos(g)*-(c/4),s/2+Math.sin(g)*-(c/4)),o.strokeStyle=x,o.lineWidth=y,o.stroke(),o.beginPath(),o.moveTo(r/2,s/2),o.lineTo(r/2+Math.cos(d)*(c/1.3),s/2+Math.sin(d)*(c/1.3)),o.strokeStyle=p,o.lineWidth=f,o.stroke(),o.beginPath(),o.moveTo(r/2,s/2),o.lineTo(r/2+Math.cos(d)*-(c/3),s/2+Math.sin(d)*-(c/3)),o.strokeStyle=p,o.lineWidth=f,o.stroke(),d+=h,g+=u,o.restore()}var a=null,o=null,r=null,s=null,c=null,h=null,u=null,d=null,g=null,f=null,y=null,b=null,p=null,x=null,S=null,m=null,M=null,P=null,k=[];return{init:t}}(),theWeirdSpoke=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),o=n.width=l.offsetWidth,r=n.height=l.offsetHeight,e(48),i()}function e(t){for(var e=0,i=0;i<t;i++){var l=particle.create(o/2+Math.cos(e)*s,r/2+Math.sin(e)*s,0,0,0),n=particle.create(o/2,r/2,0,0,0);l.friction=u,l.angleStart=e,l.addSpring(n,c,h),e+=Math.PI/(t/2),l.angleStop=e,f.push(l)}}function i(){a.clearRect(0,0,o,r),l(),requestAnimationFrame(i)}function l(){a.save();for(var t=0;t<f.length;t++)a.beginPath(),a.arc(f[t].x,f[t].y,1,0,2*Math.PI,!1),a.lineTo(f[t].x,f[t].y),g>f[t].angleStart&&g<f[t].angleStop?(isNaN(f[t].x)||a.moveTo(f[t].x=o/2+Math.cos(f[t].angleStop),f[t].y=r/2+Math.sin(f[t].angleStop)),a.fillStyle="#ff0000"):a.fillStyle="#666666",a.fill(),f[t].update();g+=d,g>2*Math.PI&&(g=0),a.restore()}var n=null,a=null,o=null,r=null,s=30,c=.1,h=10,u=.25,d=.08,g=0,f=[];return{init:t}}(),theWorm=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),o=a.getContext("2d"),r=a.width=n.offsetWidth,s=a.height=n.offsetHeight,e(n),i(t),k=spinners.particleFactory(2,r,s,c,0,!1,null,null,null),l()}function e(t){var e=window.devicePixelRatio||1,i=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;ratio=e/i,r=a.width=t.offsetWidth*ratio,s=a.height=t.offsetHeight*ratio,a.style.width=r/ratio+"px",a.style.height=s/ratio+"px"}function i(t){c=t.arcRadius?t.arcRadius:20,h=t.angleA?t.angleA:0,u=t.angleB?t.angleB:1,d=t.speedA?t.speedA:.15,g=t.speedB?t.speedB:.06,f=t.headColor?t.headColor:"#4b4b4b",y=t.headSize?t.headSize:2,b=t.tailColor?t.tailColor:"#4b4b4b",p=t.tailSize?t.tailSize:1,x=t.bodyColor?t.bodyColor:"#4b4b4b",S=t.bodyStrokeWidth?t.bodyStrokeWidth:1,m=t.distMin?t.distMin:1,M=t.distMax?t.distMax:4}function l(){o.clearRect(0,0,r,s),n(),requestAnimationFrame(l)}function n(){o.save(),o.beginPath(),o.arc(r/2,s/2,c,h,u,!1),o.lineWidth=S,o.strokeStyle=x,o.stroke();for(var t=0;t<k.length;t++)o.beginPath(),o.arc(k[0].x=r/2+Math.cos(h)*c,k[t].y=s/2+Math.sin(h)*c,p,0,2*Math.PI,!1),o.fillStyle=b,o.fill(),o.beginPath(),o.arc(k[1].x=r/2+Math.cos(u)*c,k[1].y=s/2+Math.sin(u)*c,y,0,2*Math.PI,!1),o.fillStyle=f,o.fill();var e=u-h;"tail"===P?(h+=d,u+=g,e<m&&(P="head")):"head"===P&&(h+=g,u+=d,e>M&&(P="tail")),o.restore()}var a=null,o=null,r=null,s=null,c=null,h=null,u=null,d=null,g=null,f=null,y=null,b=null,p=null,x=null,S=null,m=null,M=null,P="head",k=[];return{init:t}}();