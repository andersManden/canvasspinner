var spinners=function(){function t(t){switch(t.type){case"theCircle":theCircle.init(t);break;case"theTail":theTail.init(t);break;case"star":theExperiments.init(t);break;case"wormII":theMultiLayer.init(t);break;case"worm":theWorm.init(t);break;case"drop":theGravity.init(t);break;case"theWeirdSpoke":theWeirdSpoke.init(t);break;case"theWatch":theWatch.init(t);break;case"catchUpSpinnerII":theCatchupExperiment.init(t);break;case"theGear":theGear.init(t)}}function e(t,e,l,n,a,i,r,o,s){for(var u=a?a:0,h=[],c=0;c<t;c++){var d=particle.create(e/2+Math.cos(u)*n,l/2+Math.sin(u)*n,0,0,0),g=particle.create(e/2,l/2,0,0,0);i&&(d.friction=r,d.addSpring(g,o,s)),d.angleStart=u,u+=Math.PI/(t/2),d.angleStop=u,d.arcX=d.x,d.arcY=d.y,h.push(d)}return h}return{init:t,particleFactory:e}}(),theCatchupExperiment=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,r=n.height=l.offsetHeight,d=t.speedA?t.speedA:.1,g=t.speedB?t.speedB:.04,y=t.myColor?t.myColor:"#4b4b4b",p=t.myArcRadius?t.myArcRadius:20,M=t.myLineWidth?t.myLineWidth:3,b=spinners.particleFactory(5,i,r,p,0,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,r),l(),requestAnimationFrame(e)}function l(){a.save(),"startAngleB"===f?(o+=g,s+=g,u+=d,h+=g,utils.distanceXY(b[2].x,b[2].y,b[3].x,b[3].y)<3&&(f="pauseBA")):"stopAngleA"===f?(o+=g,s+=d,u+=g-.01,h+=g,utils.distanceXY(b[1].x,b[1].y,b[2].x,b[2].y)<3&&(f="pauseAA")):"startAngleA"===f?(o+=d,s+=g,u+=g,h+=g,utils.distanceXY(b[0].x,b[0].y,b[1].x,b[1].y)<3&&(f="pauseAB")):"stopAngleB"===f?(o+=g-.02,s+=g,u+=g,h+=d,utils.distanceXY(b[0].x,b[0].y,b[3].x,b[3].y)<3&&(f="pauseBB")):"pauseBB"===f?(o+=g,s+=g,u+=g+.02,h+=g,utils.distanceXY(b[2].x,b[2].y,b[4].x,b[4].y)<2&&(f="startAngleB")):"pauseBA"===f?(o+=g,s+=.01,s+=g+.01,u+=g,h+=g,utils.distanceXY(b[1].x,b[1].y,b[4].x,b[4].y)<2&&(f="stopAngleA")):"pauseAA"===f?(o+=g+.01,s+=g,u+=g,h+=g+.01,utils.distanceXY(b[0].x,b[0].y,b[4].x,b[4].y)<2&&(f="startAngleA")):"pauseAB"===f&&(o+=g,s+=g,u+=g,h+=g+.03,utils.distanceXY(b[3].x,b[3].y,b[4].x,b[4].y)<2&&(f="stopAngleB")),a.beginPath(),a.arc(i/2,r/2,p,o,s,!1),a.lineWidth=M,a.strokeStyle="green",a.strokeStyle=y,a.stroke(),a.beginPath(),a.arc(i/2,r/2,p,u,h+1,!1),a.lineWidth=M,a.strokeStyle="red",a.strokeStyle=y,a.stroke();for(var t=0;t<b.length;t++)a.beginPath(),a.arc(b[0].x=i/2+Math.cos(o)*p,b[0].y=r/2+Math.sin(o)*p,M/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(b[1].x=i/2+Math.cos(s)*p,b[1].y=r/2+Math.sin(s)*p,M/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(b[2].x=i/2+Math.cos(u)*p,b[2].y=r/2+Math.sin(u)*p,M/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(b[3].x=i/2+Math.cos(h+1)*p,b[3].y=r/2+Math.sin(h+1)*p,M/2-.2,0,2*Math.PI,!1),a.fillStyle=y,a.fill(),a.beginPath(),a.arc(b[4].x=i/2+Math.cos(c)*p,b[4].y=r/2+Math.sin(c)*p,2,0,2*Math.PI,!1),a.globalAlpha=0,a.fillStyle="#ff0000",a.fill();a.beginPath(),a.moveTo(i/2,r/2),a.lineTo(i/2+Math.cos(c)*p,r/2+Math.sin(c)*p),a.lineWidth=.2,a.stroke(),c+=d,a.restore()}var n=null,a=null,i=null,r=null,o=0,s=1,u=1,h=1,c=2,d=.1,g=.04,f="stopAngleB",y=null,p=20,M=3,b=[];return{init:t}}(),theCircle=function(){function t(t){var l=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),r=a.width=l.offsetWidth,o=a.height=l.offsetHeight,s=t.arcRadius?t.arcRadius:20,u=t.angleA?t.angleA:0,h=t.angleB?t.angleB:1,g=t.speedA?t.speedA:.15,f=t.speedB?t.speedB:.06,y=t.headColor?t.headColor:"#4b4b4b",p=t.headSize?t.headSize:2,M=t.tailColor?t.tailColor:"#4b4b4b",b=t.tailSize?t.tailSize:1,m=t.bodyColor?t.bodyColor:"#4b4b4b",S=t.bodyStrokeWidth?t.bodyStrokeWidth:1,I=t.distMin?t.distMin:1,v=t.distMax?t.distMax:4,A=spinners.particleFactory(2,r,o,s,0,!1,null,null,null),e()}function e(){i.clearRect(0,0,r,o),l(),n(),requestAnimationFrame(e)}function l(){var t=h-u,e=c-d;"tail"===x?(u+=g,h+=f,c+=f,d+=g,t<I&&(x="pauseHead")):"head"===x?(u+=f,h+=g,c+=g,d+=f,t>v&&(x="pauseTail")):"pauseTail"===x?(u+=f,h+=f,c+=g,d+=f,e>=2*Math.PI&&(x="tail",c=h)):"pauseHead"===x&&(u+=f,h+=f,c+=f,d+=g,e<=0&&(x="head",d=u))}function n(){i.save(),i.beginPath(),i.arc(r/2,o/2,s,u,h,!1),i.lineWidth=S,i.strokeStyle=m,i.stroke();for(var t=0;t<A.length;t++)i.beginPath(),i.arc(A[0].x=r/2+Math.cos(u)*s,A[t].y=o/2+Math.sin(u)*s,b,0,2*Math.PI,!1),i.fillStyle=M,i.fill(),i.beginPath(),i.arc(A[1].x=r/2+Math.cos(h)*s,A[1].y=o/2+Math.sin(h)*s,p,0,2*Math.PI,!1),i.fillStyle=y,i.fill();i.restore()}var a=null,i=null,r=null,o=null,s=null,u=null,h=null,c=1,d=0,g=null,f=null,y=null,p=null,M=null,b=null,m=null,S=null,I=null,v=null,x="head",A=[];return{init:t}}(),theExperiments=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,r=n.height=l.offsetHeight,g=spinners.particleFactory(u,i,r,o,0,!1,null,null,null),f=spinners.particleFactory(u,i,r,s,Math.PI/u,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,r),l(),requestAnimationFrame(e)}function l(){a.save();for(var t=0;t<u;t++)a.beginPath(),a.moveTo(g[t].x=i/2+Math.cos(g[t].angleStart)*o,g[t].y=r/2+Math.sin(g[t].angleStart)*o),a.lineTo(f[t].x=i/2+Math.cos(f[t].angleStart)*s,f[t].y=r/2+Math.sin(f[t].angleStart)*s),t<u-1?a.lineTo(g[t+1].x,g[t+1].y):(a.moveTo(f[u-1].x,f[u-1].y),a.lineTo(g[0].x,g[0].y)),a.strokeStyle="#4b4b4b",a.stroke(),g[t].angleStart+=h,f[t].angleStart+=h,"shrink"===d?(s-=c,s<=o-8&&(d="grow")):"grow"===d&&(s+=c,s>=o+8&&(d="shrink"));a.restore()}var n=null,a=null,i=null,r=null,o=20,s=o+8,u=8,h=.03,c=.01,d="shrink",g=[],f=[];return{init:t}}(),theGear=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,r=n.height=l.offsetHeight,g=spinners.particleFactory(u,i,r,o,Math.PI/u,!1,null,null,null),f=spinners.particleFactory(u,i,r,s,Math.PI/u,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,r),l(),requestAnimationFrame(e)}function l(){a.save();for(var t=0;t<u;t++);for(var e=0;e<u;e++)a.beginPath(),a.strokeStyle="red",a.fillStyle="red",e%2!==0&&(a.moveTo(f[e].x=i/2+Math.cos(f[e].angleStart+c)*s,f[e].y=r/2+Math.sin(f[e].angleStart+c)*s),a.lineTo(f[e-1].x=i/2+Math.cos(f[e-1].angleStart-c)*s,f[e-1].y=r/2+Math.sin(f[e-1].angleStart-c)*s),a.lineTo(g[e-1].x=i/2+Math.cos(g[e-1].angleStart+d)*o,g[e-1].y=r/2+Math.sin(g[e-1].angleStart+d)*o),a.lineTo(g[e].x=i/2+Math.cos(g[e].angleStart-d)*o,g[e].y=r/2+Math.sin(g[e].angleStart-d)*o),a.lineTo(f[e].x=i/2+Math.cos(f[e].angleStart+c)*s,f[e].y=r/2+Math.sin(f[e].angleStart+c)*s)),a.fill(),a.stroke();a.beginPath(),a.arc(i/2,r/2,s-h/2,0,2*Math.PI,!1),a.lineWidth=h,a.stroke(),a.restore()}var n=null,a=null,i=null,r=null,o=30,s=o-o/5,u=16,h=s/2,c=.06,d=.08,g=[],f=[];return{init:t}}(),theGravity=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,r=n.height=l.offsetHeight,h=t.arcRadius?t.arcRadius:20,c=t.lineColor?t.lineColor:"#4b4b4b",d=t.lineWidth?t.lineWidth:1,g=t.dotColor?t.dotColor:"#4b4b4b",f=t.dotSize?t.dotSize:2,y=t.opacity?t.opacity:1,e()}function e(){a.clearRect(0,0,i,r),l(),requestAnimationFrame(e)}function l(){a.save(),a.beginPath(),a.arc(i/2+Math.cos(o)*h,r/2+Math.sin(o)*h,f,0,2*Math.PI,!1),a.fillStyle=g,a.globalAlpha=y,a.fill(),a.beginPath(),a.arc(i/2,r/2,h,0,2*Math.PI,!1),a.lineWidth=d,a.strokeStyle=c,a.stroke(),o>=1.5*Math.PI?s+=u:o>=0&&o<=.5*Math.PI?s+=u:s-=1.05*u,o>2*Math.PI&&(o=0),o+=s,a.restore()}var n=null,a=null,i=null,r=null,o=1.5*Math.PI,s=.02,u=.01,h=null,c=null,d=null,g=null,f=null,y=null;return{init:t}}(),theMultiLayer=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),r=a.width=n.offsetWidth,o=a.height=n.offsetHeight,c=t,s=t.layers,h=e(t),l()}function e(t){for(var e=[],l=t.arcRadiusOffset,n=0;n<t.layers;n++){var a={angleA:0,angleB:1,speedA:.1,speedB:.02,headColor:t.template.headColor,headSize:3,tailColor:t.template.tailColor,tailSize:2,bodyColor:t.template.bodyColor,bodyStrokeWidth:1,distMin:1,distMax:4,arcRadius:l,pSize:1,pHead:spinners.particleFactory(1,r,o,l,0,!1,null,null,null),pTail:spinners.particleFactory(1,r,o,l,0,!1,null,null,null)};e.push(a),l-=t.layersDistance}return e}function l(){i.clearRect(0,0,r,o),n(),requestAnimationFrame(l)}function n(){i.save();for(var t=0;t<s;t++)i.beginPath(),i.arc(h[t].pHead[0].x=r/2+Math.cos(c.angleA)*h[t].arcRadius,h[t].pHead[0].x=o/2+Math.sin(c.angleA)*h[t].arcRadius,.5,0,2*Math.PI,!1),i.arc(h[t].pTail[0].x=r/2+Math.cos(c.angleB)*h[t].arcRadius,h[t].pTail[0].x=o/2+Math.sin(c.angleB)*h[t].arcRadius,.5,0,2*Math.PI,!1),i.fillStyle="#4b4b4b",i.fill(),i.beginPath(),i.arc(r/2,o/2,h[t].arcRadius,c.angleA,c.angleB,!1),i.strokeStyle="#4b4b4b",i.lineWidth=c.lineWidth,i.stroke();var e=c.angleB-c.angleA;"tail"===u?(c.angleA+=c.speedA,c.angleB+=c.speedB,e<c.distMin&&(u="head")):"head"===u&&(c.angleA+=c.speedB,c.angleB+=c.speedA,e>c.distMax&&(u="tail")),i.restore()}var a=null,i=null,r=null,o=null,s=null,u="head",h=[],c=null;return{init:t}}(),theTail=function(){function t(t){var a=document.getElementById(t.containerId);r=document.getElementById(t.canvasId),o=r.getContext("2d"),s=r.width=a.offsetWidth,u=r.height=a.offsetHeight,p=spinners.particleFactory(y,s,u,h,0,!1,null,null,null),e(),l(),n()}function e(){for(var t=c,e=0;e<p.length;e++)p[e].size=t,t-=f}function l(){for(var t=d,e=0;e<p.length;e++)p[e].position=t,t-=f}function n(){o.clearRect(0,0,s,u),i(),a(),requestAnimationFrame(n)}function a(){for(var t=0;t<p.length;t++)p[t].position+=g}function i(){o.save(),o.beginPath(),o.arc(s/2,u/2,h,0,2*Math.PI,!1),o.strokeStyle="white",o.lineWidth=6,o.stroke();for(var t=0;t<p.length;t++)o.beginPath(),o.arc(p[t].x=s/2+Math.cos(p[t].position)*h,p[t].y=u/2+Math.sin(p[t].position)*h,p[t].size,0,2*Math.PI,!1),o.fillStyle="#4b4b4b",o.fill();o.restore()}var r=null,o=null,s=null,u=null,h=20,c=2,d=0,g=.1,f=.05,y=40,p=[];return{init:t}}(),theWatch=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,r=n.height=l.offsetHeight,o=t.arcRadius?t.arcRadius:15,s=t.speed?t.speed:.1,u=s/12,h=t.startAngleMinutes?t.startAngleMinutes:0,c=t.startAngleHours?t.startAngleHours:0,d=t.armWidthMinute?t.armWidthMinute:1,g=t.armWidthHour?t.armWidthHour:2,f=t.clockLineWidth?t.clockLineWidth:1,y=t.armColorMinute?t.armColorMinute:"#4b4b4b",p=t.armColorHour?t.armColorHour:"#4b4b4b",M=t.clockColorLine?t.clockColorLine:"#4b4b4b",b=t.clockColorFill?t.clockColorFill:"#ffffff",m=t.indicatorColorFill?t.indicatorColorFill:"#4b4b4b",S=t.opacity?t.opacity:1,t.hoursIndicator&&(I=spinners.particleFactory(12,i,r,o/1.2,0,!1,null,null,null)),e()}function e(){a.clearRect(0,0,i,r),l(),requestAnimationFrame(e)}function l(){a.save(),a.globalAlpha=S,a.beginPath(),a.arc(i/2,r/2,o,0,2*Math.PI,!1),a.strokeStyle=M,a.lineWidth=f,a.fillStyle=b,a.globalAlpha=S,a.fill(),a.stroke();for(var t=0;t<I.length;t++)a.beginPath(),a.arc(I[t].x,I[t].y,1,0,2*Math.PI,!1),a.fillStyle=m,a.fill();a.beginPath(),a.moveTo(i/2,r/2),a.lineTo(i/2+Math.cos(c)*(o/2),r/2+Math.sin(c)*(o/2)),a.strokeStyle=p,a.lineWidth=g,a.stroke(),a.beginPath(),a.moveTo(i/2,r/2),a.lineTo(i/2+Math.cos(c)*-(o/4),r/2+Math.sin(c)*-(o/4)),a.strokeStyle=p,a.lineWidth=g,a.stroke(),a.beginPath(),a.moveTo(i/2,r/2),a.lineTo(i/2+Math.cos(h)*(o/1.3),r/2+Math.sin(h)*(o/1.3)),a.strokeStyle=y,a.lineWidth=d,a.stroke(),a.beginPath(),a.moveTo(i/2,r/2),a.lineTo(i/2+Math.cos(h)*-(o/3),r/2+Math.sin(h)*-(o/3)),a.strokeStyle=y,a.lineWidth=d,a.stroke(),h+=s,c+=u,a.restore()}var n=null,a=null,i=null,r=null,o=null,s=null,u=null,h=null,c=null,d=null,g=null,f=null,y=null,p=null,M=null,b=null,m=null,S=null,I=[];return{init:t}}(),theWeirdSpoke=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),r=a.width=n.offsetWidth,o=a.height=n.offsetHeight,e(48),l()}function e(t){for(var e=0,l=0;l<t;l++){var n=particle.create(r/2+Math.cos(e)*s,o/2+Math.sin(e)*s,0,0,0),a=particle.create(r/2,o/2,0,0,0);n.friction=c,n.angleStart=e,n.addSpring(a,u,h),e+=Math.PI/(t/2),n.angleStop=e,f.push(n)}}function l(){i.clearRect(0,0,r,o),n(),requestAnimationFrame(l)}function n(){i.save();for(var t=0;t<f.length;t++)i.beginPath(),i.arc(f[t].x,f[t].y,1,0,2*Math.PI,!1),i.lineTo(f[t].x,f[t].y),g>f[t].angleStart&&g<f[t].angleStop?(isNaN(f[t].x)||i.moveTo(f[t].x=r/2+Math.cos(f[t].angleStop),f[t].y=o/2+Math.sin(f[t].angleStop)),i.fillStyle="#ff0000"):i.fillStyle="#666666",i.fill(),f[t].update();g+=d,g>2*Math.PI&&(g=0),i.restore()}var a=null,i=null,r=null,o=null,s=30,u=.1,h=10,c=.25,d=.08,g=0,f=[];return{init:t}}(),theWorm=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,r=n.height=l.offsetHeight,o=t.arcRadius?t.arcRadius:20,s=t.angleA?t.angleA:0,u=t.angleB?t.angleB:1,h=t.speedA?t.speedA:.15,c=t.speedB?t.speedB:.06,d=t.headColor?t.headColor:"#4b4b4b",g=t.headSize?t.headSize:2,f=t.tailColor?t.tailColor:"#4b4b4b",y=t.tailSize?t.tailSize:1,p=t.bodyColor?t.bodyColor:"#4b4b4b",M=t.bodyStrokeWidth?t.bodyStrokeWidth:1,b=t.distMin?t.distMin:1,m=t.distMax?t.distMax:4,I=spinners.particleFactory(2,i,r,o,0,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,r),l(),requestAnimationFrame(e)}function l(){a.save(),a.beginPath(),a.arc(i/2,r/2,o,s,u,!1),a.lineWidth=M,a.strokeStyle=p,a.stroke();for(var t=0;t<I.length;t++)a.beginPath(),a.arc(I[0].x=i/2+Math.cos(s)*o,I[t].y=r/2+Math.sin(s)*o,y,0,2*Math.PI,!1),a.fillStyle=f,a.fill(),a.beginPath(),a.arc(I[1].x=i/2+Math.cos(u)*o,I[1].y=r/2+Math.sin(u)*o,g,0,2*Math.PI,!1),a.fillStyle=d,a.fill();var e=u-s;"tail"===S?(s+=h,u+=c,e<b&&(S="head")):"head"===S&&(s+=c,u+=h,e>m&&(S="tail")),a.restore()}var n=null,a=null,i=null,r=null,o=null,s=null,u=null,h=null,c=null,d=null,g=null,f=null,y=null,p=null,M=null,b=null,m=null,S="head",I=[];return{init:t}}();