var canvasSpinners=function(){function t(t){switch(t.type){case"theCircle":theCircle.init(t);break;case"theTail":theTail.init(t);break;case"star":theExperiments.init(t);break;case"wormII":theMultiLayer.init(t);break;case"worm":theWorm.init(t);break;case"drop":theGravity.init(t);break;case"spokeSpinner":e(t);break;case"theWatch":theWatch.init(t);break;case"catchUpSpinnerII":l(t)}}function e(t,e){function l(t,e){alert("work in progress");var l=document.getElementById(t);o=document.getElementById(e),r=o.getContext("2d"),s=o.width=l.offsetWidth,u=o.height=l.offsetHeight,n(48),a()}function n(t){for(var e=0,l=0;l<t;l++){var n=particle.create(s/2+Math.cos(e)*c,u/2+Math.sin(e)*c,0,0,0),a=particle.create(s/2,u/2,0,0,0);n.friction=g,n.angleStart=e,n.addSpring(a,h,d),e+=Math.PI/(t/2),n.angleStop=e,p.push(n)}}function a(){r.clearRect(0,0,s,u),i(),requestAnimationFrame(a)}function i(){r.save();for(var t=0;t<p.length;t++)r.beginPath(),r.arc(p[t].x,p[t].y,1,0,2*Math.PI,!1),r.lineTo(p[t].x,p[t].y),y>p[t].angleStart&&y<p[t].angleStop?(isNaN(p[t].x)||r.moveTo(p[t].x=s/2+Math.cos(p[t].angleStop),p[t].y=u/2+Math.sin(p[t].angleStop)),r.fillStyle="#ff0000"):r.fillStyle="#666666",r.fill(),p[t].update();y+=f,y>2*Math.PI&&(y=0),r.restore()}var o=null,r=null,s=null,u=null,c=30,h=.1,d=10,g=.25,f=.08,y=0,p=[];l(t,e)}function l(t){function e(t){var e=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),o=a.width=e.offsetWidth,r=a.height=e.offsetHeight,g=t.speedA?t.speedA:.1,f=t.speedB?t.speedB:.04,p=t.myColor?t.myColor:"#4b4b4b",b=t.myArcRadius?t.myArcRadius:20,M=t.myLineWidth?t.myLineWidth:3,m=canvasSpinners.particleFactory(5,o,r,b,0,!1,null,null,null),l()}function l(){i.clearRect(0,0,o,r),n(),requestAnimationFrame(l)}function n(){i.save(),"startAngleB"===y?(s+=f,u+=f,c+=g,h+=f,utils.distanceXY(m[2].x,m[2].y,m[3].x,m[3].y)<3&&(y="pauseBA")):"stopAngleA"===y?(s+=f,u+=g,c+=f-.01,h+=f,utils.distanceXY(m[1].x,m[1].y,m[2].x,m[2].y)<3&&(y="pauseAA")):"startAngleA"===y?(s+=g,u+=f,c+=f,h+=f,utils.distanceXY(m[0].x,m[0].y,m[1].x,m[1].y)<3&&(y="pauseAB")):"stopAngleB"===y?(s+=f-.02,u+=f,c+=f,h+=g,utils.distanceXY(m[0].x,m[0].y,m[3].x,m[3].y)<3&&(y="pauseBB")):"pauseBB"===y?(s+=f,u+=f,c+=f+.02,h+=f,utils.distanceXY(m[2].x,m[2].y,m[4].x,m[4].y)<2&&(y="startAngleB")):"pauseBA"===y?(s+=f,u+=.01,u+=f+.01,c+=f,h+=f,utils.distanceXY(m[1].x,m[1].y,m[4].x,m[4].y)<2&&(y="stopAngleA")):"pauseAA"===y?(s+=f+.01,u+=f,c+=f,h+=f+.01,utils.distanceXY(m[0].x,m[0].y,m[4].x,m[4].y)<2&&(y="startAngleA")):"pauseAB"===y&&(s+=f,u+=f,c+=f,h+=f+.03,utils.distanceXY(m[3].x,m[3].y,m[4].x,m[4].y)<2&&(y="stopAngleB")),i.beginPath(),i.arc(o/2,r/2,b,s,u,!1),i.lineWidth=M,i.strokeStyle="green",i.strokeStyle=p,i.stroke(),i.beginPath(),i.arc(o/2,r/2,b,c,h+1,!1),i.lineWidth=M,i.strokeStyle="red",i.strokeStyle=p,i.stroke();for(var t=0;t<m.length;t++)i.beginPath(),i.arc(m[0].x=o/2+Math.cos(s)*b,m[0].y=r/2+Math.sin(s)*b,M/2-.2,0,2*Math.PI,!1),i.fillStyle=p,i.fill(),i.beginPath(),i.arc(m[1].x=o/2+Math.cos(u)*b,m[1].y=r/2+Math.sin(u)*b,M/2-.2,0,2*Math.PI,!1),i.fillStyle=p,i.fill(),i.beginPath(),i.arc(m[2].x=o/2+Math.cos(c)*b,m[2].y=r/2+Math.sin(c)*b,M/2-.2,0,2*Math.PI,!1),i.fillStyle=p,i.fill(),i.beginPath(),i.arc(m[3].x=o/2+Math.cos(h+1)*b,m[3].y=r/2+Math.sin(h+1)*b,M/2-.2,0,2*Math.PI,!1),i.fillStyle=p,i.fill(),i.beginPath(),i.arc(m[4].x=o/2+Math.cos(d)*b,m[4].y=r/2+Math.sin(d)*b,2,0,2*Math.PI,!1),i.globalAlpha=0,i.fillStyle="#ff0000",i.fill();i.beginPath(),i.moveTo(o/2,r/2),i.lineTo(o/2+Math.cos(d)*b,r/2+Math.sin(d)*b),i.lineWidth=.2,i.stroke(),d+=g,i.restore()}var a=null,i=null,o=null,r=null,s=0,u=1,c=1,h=1,d=2,g=.1,f=.04,y="stopAngleB",p=null,b=20,M=3,m=[];e(t)}function n(t,e,l,n,a,i,o,r,s){for(var u=a?a:0,c=[],h=0;h<t;h++){var d=particle.create(e/2+Math.cos(u)*n,l/2+Math.sin(u)*n,0,0,0),g=particle.create(e/2,l/2,0,0,0);i&&(d.friction=o,d.addSpring(g,r,s)),d.angleStart=u,u+=Math.PI/(t/2),d.angleStop=u,d.arcX=d.x,d.arcY=d.y,c.push(d)}return c}return{initSpinner:t,particleFactory:n}}(),theCircle=function(){function t(t){var l=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),o=a.width=l.offsetWidth,r=a.height=l.offsetHeight,s=t.arcRadius?t.arcRadius:20,u=t.angleA?t.angleA:0,c=t.angleB?t.angleB:1,g=t.speedA?t.speedA:.15,f=t.speedB?t.speedB:.06,y=t.headColor?t.headColor:"#4b4b4b",p=t.headSize?t.headSize:2,b=t.tailColor?t.tailColor:"#4b4b4b",M=t.tailSize?t.tailSize:1,m=t.bodyColor?t.bodyColor:"#4b4b4b",S=t.bodyStrokeWidth?t.bodyStrokeWidth:1,v=t.distMin?t.distMin:1,I=t.distMax?t.distMax:4,x=canvasSpinners.particleFactory(2,o,r,s,0,!1,null,null,null),e()}function e(){i.clearRect(0,0,o,r),l(),n(),requestAnimationFrame(e)}function l(){var t=c-u,e=h-d;"tail"===A?(u+=g,c+=f,h+=f,d+=g,t<v&&(A="pauseHead")):"head"===A?(u+=f,c+=g,h+=g,d+=f,t>I&&(A="pauseTail")):"pauseTail"===A?(u+=f,c+=f,h+=g,d+=f,e>=2*Math.PI&&(A="tail",h=c)):"pauseHead"===A&&(u+=f,c+=f,h+=f,d+=g,e<=0&&(A="head",d=u))}function n(){i.save(),i.beginPath(),i.arc(o/2,r/2,s,u,c,!1),i.lineWidth=S,i.strokeStyle=m,i.stroke();for(var t=0;t<x.length;t++)i.beginPath(),i.arc(x[0].x=o/2+Math.cos(u)*s,x[t].y=r/2+Math.sin(u)*s,M,0,2*Math.PI,!1),i.fillStyle=b,i.fill(),i.beginPath(),i.arc(x[1].x=o/2+Math.cos(c)*s,x[1].y=r/2+Math.sin(c)*s,p,0,2*Math.PI,!1),i.fillStyle=y,i.fill();i.restore()}var a=null,i=null,o=null,r=null,s=null,u=null,c=null,h=1,d=0,g=null,f=null,y=null,p=null,b=null,M=null,m=null,S=null,v=null,I=null,A="head",x=[];return{init:t}}(),theExperiments=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,g=canvasSpinners.particleFactory(u,i,o,r,0,!1,null,null,null),f=canvasSpinners.particleFactory(u,i,o,s,Math.PI/u,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save();for(var t=0;t<u;t++)a.beginPath(),a.moveTo(g[t].x=i/2+Math.cos(g[t].angleStart)*r,g[t].y=o/2+Math.sin(g[t].angleStart)*r),a.lineTo(f[t].x=i/2+Math.cos(f[t].angleStart)*s,f[t].y=o/2+Math.sin(f[t].angleStart)*s),t<u-1?a.lineTo(g[t+1].x,g[t+1].y):(a.moveTo(f[u-1].x,f[u-1].y),a.lineTo(g[0].x,g[0].y)),a.strokeStyle="#4b4b4b",a.stroke(),g[t].angleStart+=c,f[t].angleStart+=c,"shrink"===d?(s-=h,s<=r-8&&(d="grow")):"grow"===d&&(s+=h,s>=r+8&&(d="shrink"));a.restore()}var n=null,a=null,i=null,o=null,r=20,s=r+8,u=8,c=.03,h=.01,d="shrink",g=[],f=[];return{init:t}}(),theGravity=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,c=t.arcRadius?t.arcRadius:20,h=t.lineColor?t.lineColor:"#4b4b4b",d=t.lineWidth?t.lineWidth:1,g=t.dotColor?t.dotColor:"#4b4b4b",f=t.dotSize?t.dotSize:2,y=t.opacity?t.opacity:1,e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.beginPath(),a.arc(i/2+Math.cos(r)*c,o/2+Math.sin(r)*c,f,0,2*Math.PI,!1),a.fillStyle=g,a.globalAlpha=y,a.fill(),a.beginPath(),a.arc(i/2,o/2,c,0,2*Math.PI,!1),a.lineWidth=d,a.strokeStyle=h,a.stroke(),r>=1.5*Math.PI?s+=u:r>=0&&r<=.5*Math.PI?s+=u:s-=1.05*u,r>2*Math.PI&&(r=0),r+=s,a.restore()}var n=null,a=null,i=null,o=null,r=1.5*Math.PI,s=.02,u=.01,c=null,h=null,d=null,g=null,f=null,y=null;return{init:t}}(),theMultiLayer=function(){function t(t){var n=document.getElementById(t.containerId);a=document.getElementById(t.canvasId),i=a.getContext("2d"),o=a.width=n.offsetWidth,r=a.height=n.offsetHeight,h=t,s=t.layers,c=e(t),l()}function e(t){for(var e=[],l=t.arcRadiusOffset,n=0;n<t.layers;n++){var a={angleA:0,angleB:1,speedA:.1,speedB:.02,headColor:t.template.headColor,headSize:3,tailColor:t.template.tailColor,tailSize:2,bodyColor:t.template.bodyColor,bodyStrokeWidth:1,distMin:1,distMax:4,arcRadius:l,pSize:1,pHead:canvasSpinners.particleFactory(1,o,r,l,0,!1,null,null,null),pTail:canvasSpinners.particleFactory(1,o,r,l,0,!1,null,null,null)};e.push(a),l-=t.layersDistance}return e}function l(){i.clearRect(0,0,o,r),n(),requestAnimationFrame(l)}function n(){i.save();for(var t=0;t<s;t++)i.beginPath(),i.arc(c[t].pHead[0].x=o/2+Math.cos(h.angleA)*c[t].arcRadius,c[t].pHead[0].x=r/2+Math.sin(h.angleA)*c[t].arcRadius,.5,0,2*Math.PI,!1),i.arc(c[t].pTail[0].x=o/2+Math.cos(h.angleB)*c[t].arcRadius,c[t].pTail[0].x=r/2+Math.sin(h.angleB)*c[t].arcRadius,.5,0,2*Math.PI,!1),i.fillStyle="#4b4b4b",i.fill(),i.beginPath(),i.arc(o/2,r/2,c[t].arcRadius,h.angleA,h.angleB,!1),i.strokeStyle="#4b4b4b",i.lineWidth=h.lineWidth,i.stroke();var e=h.angleB-h.angleA;"tail"===u?(h.angleA+=h.speedA,h.angleB+=h.speedB,e<h.distMin&&(u="head")):"head"===u&&(h.angleA+=h.speedB,h.angleB+=h.speedA,e>h.distMax&&(u="tail")),i.restore()}var a=null,i=null,o=null,r=null,s=null,u="head",c=[],h=null;return{init:t}}(),theTail=function(){function t(t){var a=document.getElementById(t.containerId);o=document.getElementById(t.canvasId),r=o.getContext("2d"),s=o.width=a.offsetWidth,u=o.height=a.offsetHeight,p=canvasSpinners.particleFactory(y,s,u,c,0,!1,null,null,null),e(),l(),n()}function e(){for(var t=h,e=0;e<p.length;e++)p[e].size=t,t-=f}function l(){for(var t=d,e=0;e<p.length;e++)p[e].position=t,t-=f}function n(){r.clearRect(0,0,s,u),i(),a(),requestAnimationFrame(n)}function a(){for(var t=0;t<p.length;t++)p[t].position+=g}function i(){r.save(),r.beginPath(),r.arc(s/2,u/2,c,0,2*Math.PI,!1),r.strokeStyle="white",r.lineWidth=6,r.stroke();for(var t=0;t<p.length;t++)r.beginPath(),r.arc(p[t].x=s/2+Math.cos(p[t].position)*c,p[t].y=u/2+Math.sin(p[t].position)*c,p[t].size,0,2*Math.PI,!1),r.fillStyle="#4b4b4b",r.fill();r.restore()}var o=null,r=null,s=null,u=null,c=20,h=2,d=0,g=.1,f=.05,y=40,p=[];return{init:t}}(),theWatch=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,r=t.arcRadius?t.arcRadius:15,s=t.speed?t.speed:.1,u=s/12,c=t.startAngleMinutes?t.startAngleMinutes:0,h=t.startAngleHours?t.startAngleHours:0,d=t.armWidthMinute?t.armWidthMinute:1,g=t.armWidthHour?t.armWidthHour:2,f=t.clockLineWidth?t.clockLineWidth:1,y=t.armColorMinute?t.armColorMinute:"#4b4b4b",p=t.armColorHour?t.armColorHour:"#4b4b4b",b=t.clockColorLine?t.clockColorLine:"#4b4b4b",M=t.clockColorFill?t.clockColorFill:"#ffffff",m=t.indicatorColorFill?t.indicatorColorFill:"#4b4b4b",S=t.opacity?t.opacity:1,t.hoursIndicator&&(v=canvasSpinners.particleFactory(12,i,o,r/1.2,0,!1,null,null,null)),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.globalAlpha=S,a.beginPath(),a.arc(i/2,o/2,r,0,2*Math.PI,!1),a.strokeStyle=b,a.lineWidth=f,a.fillStyle=M,a.globalAlpha=S,a.fill(),a.stroke();for(var t=0;t<v.length;t++)a.beginPath(),a.arc(v[t].x,v[t].y,1,0,2*Math.PI,!1),a.fillStyle=m,a.fill();a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(h)*(r/2),o/2+Math.sin(h)*(r/2)),a.strokeStyle=p,a.lineWidth=g,a.stroke(),a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(h)*-(r/4),o/2+Math.sin(h)*-(r/4)),a.strokeStyle=p,a.lineWidth=g,a.stroke(),a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(c)*(r/1.3),o/2+Math.sin(c)*(r/1.3)),a.strokeStyle=y,a.lineWidth=d,a.stroke(),a.beginPath(),a.moveTo(i/2,o/2),a.lineTo(i/2+Math.cos(c)*-(r/3),o/2+Math.sin(c)*-(r/3)),a.strokeStyle=y,a.lineWidth=d,a.stroke(),c+=s,h+=u,a.restore()}var n=null,a=null,i=null,o=null,r=null,s=null,u=null,c=null,h=null,d=null,g=null,f=null,y=null,p=null,b=null,M=null,m=null,S=null,v=[];return{init:t}}(),theWorm=function(){function t(t){var l=document.getElementById(t.containerId);n=document.getElementById(t.canvasId),a=n.getContext("2d"),i=n.width=l.offsetWidth,o=n.height=l.offsetHeight,r=t.arcRadius?t.arcRadius:20,s=t.angleA?t.angleA:0,u=t.angleB?t.angleB:1,c=t.speedA?t.speedA:.15,h=t.speedB?t.speedB:.06,d=t.headColor?t.headColor:"#4b4b4b",g=t.headSize?t.headSize:2,f=t.tailColor?t.tailColor:"#4b4b4b",y=t.tailSize?t.tailSize:1,p=t.bodyColor?t.bodyColor:"#4b4b4b",b=t.bodyStrokeWidth?t.bodyStrokeWidth:1,M=t.distMin?t.distMin:1,m=t.distMax?t.distMax:4,v=canvasSpinners.particleFactory(2,i,o,r,0,!1,null,null,null),e()}function e(){a.clearRect(0,0,i,o),l(),requestAnimationFrame(e)}function l(){a.save(),a.beginPath(),a.arc(i/2,o/2,r,s,u,!1),a.lineWidth=b,a.strokeStyle=p,a.stroke();for(var t=0;t<v.length;t++)a.beginPath(),a.arc(v[0].x=i/2+Math.cos(s)*r,v[t].y=o/2+Math.sin(s)*r,y,0,2*Math.PI,!1),a.fillStyle=f,a.fill(),a.beginPath(),a.arc(v[1].x=i/2+Math.cos(u)*r,v[1].y=o/2+Math.sin(u)*r,g,0,2*Math.PI,!1),a.fillStyle=d,a.fill();var e=u-s;"tail"===S?(s+=c,u+=h,e<M&&(S="head")):"head"===S&&(s+=h,u+=c,e>m&&(S="tail")),a.restore()}var n=null,a=null,i=null,o=null,r=null,s=null,u=null,c=null,h=null,d=null,g=null,f=null,y=null,p=null,b=null,M=null,m=null,S="head",v=[];return{init:t}}();